{% load admin_static %}{% load firstof from future %}{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title> | 'CRPT - City Resilience Profile Tool'</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="{% static 'crpt201511/css/bootstrap.css' %}" media="screen">
    <link rel="stylesheet" href="{% static 'crpt201511/css/crpt.css' %}" media="screen">
    <link rel="stylesheet" href="{% static 'crpt201511/css/login_bootstrap.css' %}" media="screen">
</head>
<body onload="orderQuestions();setFocusFirstElemForm();">
    <div id="crpt" class="container">
        {% block header%}{% endblock %}
        {% block main_menu %}{% endblock %}
        {% block content%}{% endblock %}
    </div>

    <script src="{% static 'crpt201511/js/jquery.min.js' %}"></script>
    <script src="{% static 'crpt201511/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'crpt201511/js/custom.js' %}"></script>
    <script src="{% static 'crpt201511/js/crpt.js' %}"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="{% static 'crpt201511/js/crpt-charts.js' %}"></script>

    <script>
        $(function () {

            $('#overall-completion').highcharts({
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false,
                    type: 'pie'
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                },
                title: {
                    text: 'Completion'
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    name: 'Completion',
                    colorByPoint: true,
                    data: [{
                        name: 'Filled',
                        y: {{filled_percen}}
                    }, {
                        name: 'Not Filled',
                        y: {{not_filled_percen}},
                        sliced: true,
                        selected: true
                    }]
                }]
            });


            $('#overall-dimensions').highcharts({
                chart: {
                    polar: true,
                    type: 'line'
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                },
                title: {
                    text: 'Overall Profile'
                },
                pane: {
                    size: '80%'
                },
                xAxis: {
                    categories: ['Organisational', 'Physical', 'Functional',],
                    tickmarkPlacement: 'on',
                    lineWidth: 0
                },
                yAxis: {
                    gridLineInterpolation: 'polygon',
                    lineWidth: 0,
                    min: 0,
                    max: 10
                },
                tooltip: {
                    shared: true,
                    pointFormat: '<span style="color:{series.color}">{series.name}: <b>{point.y}</b><br/>'
                },
                legend: {
                    align: 'center',
                    verticalAlign: 'bottom',
                    y: 0,
                    layout: 'vertical'
                },
                series: [{
                    name: 'Overall Score',
                    data: [{{ organisational_score }}, {{ physical_score }}, {{ functional_score }}],
                    pointPlacement: 'on'
                }]

            });

            $('#overall-mov').highcharts({
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                },
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Degree of certainty'
                },
                xAxis: {
                    categories: ['Public Knowledge', 'Media', 'Official Document']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: ''
                    }
                },
                tooltip: {
                    pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y:00.00f}</b> ({point.percentage:.0f}%)<br/>',
                    shared: true
                },
                plotOptions: {
                    column: {
                        stacking: 'percent'
                    }
                },
                series: [{
                    name: 'Public Knowledge',
                    data: [{{ mov_public_knowledge }}]
                }, {
                    name: 'Media',
                    data: [{{ mov_media }}]
                }, {
                    name: 'Oficial Document',
                    data: [{{ mov_official_document }}]
                }]
            });




        });

    </script>


</body>
</html>
